function onYouTubeIframeAPIReady(){for(i=0;i<ANALYZIFY.yt.videos.length;i++)ANALYZIFY.yt.players.push(new YT.Player(ANALYZIFY.yt.videos[i].id,{height:"360",width:"640",videoId:ANALYZIFY.yt.videos[i].getAttribute("data-ytId"),playerVars:{rel:0,showinfo:0,autoplay:0,enablejsapi:1,origin:ANALYZIFY.BASE,controls:2},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange,onError:onPlayerError}}))}function onPlayerReady(t){t.target.ready=!0,t.target.lastAction="ready"}function onPlayerStateChange(t){!0!==ANALYZIFY.debug.yt||console.log("last: "+t.target.lastAction),t.data===YT.PlayerState.PLAYING&&setTimeout(onPlayerPercent,1e3,t.target);var e=t.target.getVideoData(),a=e.title,r=e.video_id;if("ready"===t.target.lastAction){if(t.data===YT.PlayerState.PLAYING){A=ANALYZIFY.timerInterval({120:30},"sec",ANALYZIFY.activeTimer.counter);!0!==ANALYZIFY.debug.yt?ANALYZIFY.dlPush("youtube","firstplay",r+" - "+a,A,!1,"beacon"):console.log("FIRSTPLAY: "+ANALYZIFY.activeTimer.counter+" seg"),ANALYZIFY.jqLink.func({customTimer:[r],customActiveMaster:[r,!0]}),t.target.lastAction="firstplay",t.target.justChanged=!1}}else if(t.data===YT.PlayerState.PLAYING&&!0===t.target.autoStatChange&&!0===t.target.autoPlayed){ANALYZIFY.yt.videoTime=parseInt(t.target.getCurrentTime()/t.target.getDuration()*100);A=ANALYZIFY.timerInterval({100:20},"%",ANALYZIFY.yt.videoTime);!0!==ANALYZIFY.debug.yt?ANALYZIFY.dlPush("youtube","autoplay",r+" - "+a,A,!1,"beacon","fb"):console.log("AUTOPLAY: "+ANALYZIFY.yt.videoTime+"%  /  "+r+" - "+a),t.target.lastAction="play",t.target.justChanged=!1,t.target.autoPlayed=!1}else if(t.data===YT.PlayerState.PLAYING&&"pause"===t.target.lastAction&&t.target.getCurrentTime()-t.target.pausedTime<1&&t.target.getCurrentTime()-t.target.pausedTime>=-1&&!1===t.target.justChanged){ANALYZIFY.yt.videoTime=parseInt(t.target.getCurrentTime()/t.target.getDuration()*100);A=ANALYZIFY.timerInterval({100:20},"%",ANALYZIFY.yt.videoTime);!0!==ANALYZIFY.debug.yt?ANALYZIFY.dlPush("youtube","play",r+" - "+a,A,!1,"beacon","fb"):console.log("PLAY: "+ANALYZIFY.yt.videoTime+"%  /  "+r+" - "+a),t.target.lastAction="play",t.target.justChanged=!1}else if(t.data===YT.PlayerState.PLAYING&&"pause"===t.target.lastAction){ANALYZIFY.yt.videoTime=parseInt(t.target.getCurrentTime()/t.target.getDuration()*100);A=ANALYZIFY.timerInterval({100:20},"%",ANALYZIFY.yt.videoTime);!0!==ANALYZIFY.debug.yt?ANALYZIFY.dlPush("youtube","jump",r+" - "+a,A,!1,"beacon","fb"):console.log("JUMP: "+ANALYZIFY.yt.videoTime+"%  /  "+r+" - "+a),t.target.lastAction="jump",t.target.justChanged=!1}else if(t.data===YT.PlayerState.PAUSED&&!0===t.target.autoStatChange&&!0===t.target.autoPaused){t.target.pausedTime=t.target.getCurrentTime(),ANALYZIFY.yt.videoTime=parseInt(t.target.getCurrentTime()/t.target.getDuration()*100);var A=ANALYZIFY.timerInterval({100:20},"%",ANALYZIFY.yt.videoTime);!0!==ANALYZIFY.debug.yt?ANALYZIFY.dlPush("youtube","autopause",r+" - "+a,A,!1,"beacon","fb"):console.log("AUTOPAUSE: "+ANALYZIFY.yt.videoTime+"%  /  "+r+" - "+a),t.target.lastAction="pause",t.target.justChanged=!1,t.target.autoPaused=!1}else t.data!==YT.PlayerState.PAUSED||"firstplay"!==t.target.lastAction&&"play"!==t.target.lastAction&&"jump"!==t.target.lastAction?t.target.justChanged=!0:(t.target.pausedTime=t.target.getCurrentTime(),setTimeout(function(){if(t.data===YT.PlayerState.PLAYING||t.data===YT.PlayerState.BUFFERING||!0===t.target.justChanged);else{ANALYZIFY.yt.videoTime=parseInt(t.target.getCurrentTime()/t.target.getDuration()*100);var e=ANALYZIFY.timerInterval({100:20},"%",ANALYZIFY.yt.videoTime);!0!==ANALYZIFY.debug.yt?ANALYZIFY.dlPush("youtube","pause",r+" - "+a,e,!0,"beacon","fb"):console.log("PAUSE: "+ANALYZIFY.yt.videoTime+"%  /  "+r+" - "+a),t.target.autoStatChange=!1}},200),t.target.lastAction="pause",t.target.justChanged=!1);t.data===YT.PlayerState.PLAYING?(ANALYZIFY.activeTimer.activeMaster=!0,ANALYZIFY.jqLink.func({customActiveMaster:[r,!0]})):"ready"!==t.target.lastAction&&(ANALYZIFY.activeTimer.activeMaster=!1,ANALYZIFY.jqLink.func({customActiveMaster:[r,!1],customUserNonIdle:[r,!1]}))}function onPlayerError(t){console.log("error")}function onPlayerPercent(t){if(t.getPlayerState()===YT.PlayerState.PLAYING){var e=t.getVideoData(),a=e.title,r=e.video_id,A=t.getCurrentTime()<=ANALYZIFY.customTimers[r].activeTimer?t.getCurrentTime():ANALYZIFY.customTimers[r].activeTimer,Y=t.getDuration()-A<=1.5?1:(Math.floor(A/t.getDuration()*10)/10).toFixed(2);parseFloat(Y)>.9?Y=.9:parseFloat(Y)>.8?Y=.8:parseFloat(Y)>.7?Y=.7:parseFloat(Y)>.6?Y=.6:parseFloat(Y)>.5?Y=.5:parseFloat(Y)>.4?Y=.4:parseFloat(Y)>.3?Y=.3:parseFloat(Y)>.2?Y=.2:parseFloat(Y)>.1?Y=.1:parseFloat(Y)>0&&(Y=0),Y=parseFloat(Y).toFixed(2),(!t.lastP||Y>t.lastP)&&(t.lastP=Y,0!=Y&&(!0!==ANALYZIFY.debug.yt?ANALYZIFY.dlPush("youtube","watch",r+" - "+a,100*Y,!1,"beacon"):console.log("ASSISTIDO: "+100*Y+"%  /  "+r+" - "+a))),1!=t.lastP&&setTimeout(onPlayerPercent,1e3,t)}}if(void 0!==window.ANALYZIFY){if(ANALYZIFY.yt=ANALYZIFY.yt||{},ANALYZIFY.yt.videos=document.querySelectorAll("[data-ytId]"),ANALYZIFY.yt.videos.length){ANALYZIFY.yt.players=[],ANALYZIFY.yt.videoTime;var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag),ANALYZIFY.ytExit=function(t){if(ANALYZIFY.yt.players.length)if(void 0===t){for(var e=0;e<ANALYZIFY.yt.players.length;e++)if(!0===ANALYZIFY.yt.players[e].ready&&ANALYZIFY.yt.players[e].getPlayerState()===YT.PlayerState.PLAYING){var a=(A=ANALYZIFY.yt.players[e].getVideoData()).title,r=A.video_id;ANALYZIFY.yt.videoTime=parseInt(ANALYZIFY.yt.players[e].getCurrentTime()/ANALYZIFY.yt.players[e].getDuration()*100);Y=ANALYZIFY.timerInterval({100:20},"%",ANALYZIFY.yt.videoTime);!0!==ANALYZIFY.debug.yt?ANALYZIFY.dlPush("youtube","exit",r+" - "+a,Y,!0,"beacon","fb"):console.log("SAIU: "+ANALYZIFY.yt.videoTime+"%  /  "+r+" - "+a)}}else if(!0===ANALYZIFY.yt.players[t].ready&&ANALYZIFY.yt.players[t].getPlayerState()===YT.PlayerState.PLAYING){var A=ANALYZIFY.yt.players[t].getVideoData(),a=A.title,r=A.video_id;ANALYZIFY.yt.videoTime=parseInt(ANALYZIFY.yt.players[t].getCurrentTime()/ANALYZIFY.yt.players[t].getDuration()*100);var Y=ANALYZIFY.timerInterval({100:20},"%",ANALYZIFY.yt.videoTime);!0!==ANALYZIFY.debug.yt?ANALYZIFY.dlPush("youtube","exit",r+" - "+a,Y,!0,"beacon","fb"):console.log("SAIU: "+ANALYZIFY.yt.videoTime+"%  /  "+r+" - "+a)}},ANALYZIFY.ytPause=function(t){if(void 0===t)for(var e=0;e<ANALYZIFY.yt.players.length;e++)!0===ANALYZIFY.yt.players[e].ready&&ANALYZIFY.yt.players[e].getPlayerState()===YT.PlayerState.PLAYING&&(ANALYZIFY.yt.players[e].pauseVideo(),ANALYZIFY.yt.players[e].autoStatChange=!0,ANALYZIFY.yt.players[e].autoPaused=!0);else!0===ANALYZIFY.yt.players[t].ready&&ANALYZIFY.yt.players[t].getPlayerState()===YT.PlayerState.PLAYING&&(ANALYZIFY.yt.players[t].pauseVideo(),ANALYZIFY.yt.players[t].autoStatChange=!0,ANALYZIFY.yt.players[t].autoPaused=!0)},ANALYZIFY.ytPlay=function(t){if(void 0===t)for(var e=0;e<ANALYZIFY.yt.players.length;e++)!0===ANALYZIFY.yt.players[e].ready&&ANALYZIFY.yt.players[e].getPlayerState()===YT.PlayerState.PAUSED&&!0===ANALYZIFY.yt.players[e].autoStatChange&&(ANALYZIFY.yt.players[e].playVideo(),ANALYZIFY.yt.players[e].autoPlayed=!0);else!0===ANALYZIFY.yt.players[t].ready&&ANALYZIFY.yt.players[t].getPlayerState()===YT.PlayerState.PAUSED&&(ANALYZIFY.yt.players[t].playVideo(),ANALYZIFY.yt.players[t].autoPlayed=!0)},ANALYZIFY.ytLoad=function(t,e,a,r,Y){if(Y=Y||0,ANALYZIFY.yt.players.length){var i=!0===e||"true"===e||1===e?"loadVideoById":"cueVideoById";if(void 0!==t){if("ready"!==ANALYZIFY.yt.players[Y].lastAction){var o=ANALYZIFY.yt.players[Y].getVideoData().video_id;A.ytExit(Y),ANALYZIFY.jqLink.func({unsetCustomTimer:[o]})}!0!==e&&"true"!==e&&1!==e||ANALYZIFY.jqLink.func({customTimer:[t],customActiveMaster:[t,!0]}),ANALYZIFY.yt.players[Y][i]({videoId:t,startSeconds:parseInt(a),endSeconds:parseInt(r)}),!0!==e&&"true"!==e&&1!==e&&(ANALYZIFY.yt.players[Y].lastAction="ready")}}else ANALYZIFY.yt.videos[Y].setAttribute("data-ytId",t)},Object.assign(ANALYZIFY.customEntries.beforeUnload,{ytExit:{}}),Object.assign(ANALYZIFY.customEntries.pageShow,{viewEvent:{params:["youtube",!0]}}),Object.assign(ANALYZIFY.customEntries.pageHidden,{ytPause:{}})}}else console.error("YouTube plugin must be loaded after Analyzify main script");