function onYouTubeIframeAPIReady(){for(i=0;i<ytVideos.length;i++)ytPlayers.push(new YT.Player(ytVideos[i].id,{height:"360",width:"640",videoId:ytVideos[i].getAttribute("data-ytId"),playerVars:{rel:0,showinfo:0,autoplay:0,enablejsapi:1,origin:window.BASE,controls:2},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange,onError:onPlayerError}}))}function onPlayerReady(t){t.target.ready=!0,t.target.lastAction="ready"}function onPlayerStateChange(t){!1===ytDebug||console.log("last: "+t.target.lastAction),t.data===YT.PlayerState.PLAYING&&setTimeout(onPlayerPercent,1e3,t.target);var e=t.target.getVideoData(),a=e.title,r=e.video_id;"ready"===t.target.lastAction?t.data===YT.PlayerState.PLAYING&&(!1===ytDebug?dlPush("youtube","firstplay",r+" - "+a,window.activeTimer,!1,"beacon"):console.log("FIRSTPLAY: "+window.activeTimer+" seg"),window.jqLink.func({customTimer:[r],customActiveMaster:[r,!0]}),t.target.lastAction="firstplay",t.target.justChanged=!1):t.data===YT.PlayerState.PLAYING&&!0===t.target.autoStatChange&&!0===t.target.autoPlayed?(ytVideoTime=parseInt(t.target.getCurrentTime()/t.target.getDuration()*100),!1===ytDebug?dlPush("youtube","autoplay",r+" - "+a,ytVideoTime,!1,"beacon","fb"):console.log("AUTOPLAY: "+ytVideoTime+"%  /  "+r+" - "+a),t.target.lastAction="play",t.target.justChanged=!1,t.target.autoPlayed=!1):t.data===YT.PlayerState.PLAYING&&"pause"===t.target.lastAction&&t.target.getCurrentTime()-t.target.pausedTime<1&&t.target.getCurrentTime()-t.target.pausedTime>=-1&&!1===t.target.justChanged?(ytVideoTime=parseInt(t.target.getCurrentTime()/t.target.getDuration()*100),!1===ytDebug?dlPush("youtube","play",r+" - "+a,ytVideoTime,!1,"beacon","fb"):console.log("PLAY: "+ytVideoTime+"%  /  "+r+" - "+a),t.target.lastAction="play",t.target.justChanged=!1):t.data===YT.PlayerState.PLAYING&&"pause"===t.target.lastAction?(ytVideoTime=parseInt(t.target.getCurrentTime()/t.target.getDuration()*100),!1===ytDebug?dlPush("youtube","jump",r+" - "+a,ytVideoTime,!1,"beacon","fb"):console.log("JUMP: "+ytVideoTime+"%  /  "+r+" - "+a),t.target.lastAction="jump",t.target.justChanged=!1):t.data===YT.PlayerState.PAUSED&&!0===t.target.autoStatChange&&!0===t.target.autoPaused?(t.target.pausedTime=t.target.getCurrentTime(),ytVideoTime=parseInt(t.target.getCurrentTime()/t.target.getDuration()*100),!1===ytDebug?dlPush("youtube","autopause",r+" - "+a,ytVideoTime,!1,"beacon","fb"):console.log("AUTOPAUSE: "+ytVideoTime+"%  /  "+r+" - "+a),t.target.lastAction="pause",t.target.justChanged=!1,t.target.autoPaused=!1):t.data!==YT.PlayerState.PAUSED||"firstplay"!==t.target.lastAction&&"play"!==t.target.lastAction&&"jump"!==t.target.lastAction?t.target.justChanged=!0:(t.target.pausedTime=t.target.getCurrentTime(),setTimeout(function(){t.data===YT.PlayerState.PLAYING||t.data===YT.PlayerState.BUFFERING||!0===t.target.justChanged||(ytVideoTime=parseInt(t.target.getCurrentTime()/t.target.getDuration()*100),!1===ytDebug?dlPush("youtube","pause",r+" - "+a,ytVideoTime,!0,"beacon","fb"):console.log("PAUSE: "+ytVideoTime+"%  /  "+r+" - "+a),t.target.autoStatChange=!1)},200),t.target.lastAction="pause",t.target.justChanged=!1),t.data===YT.PlayerState.PLAYING?(window.activeMaster=!0,window.jqLink.func({customActiveMaster:[r,!0]})):"ready"!==t.target.lastAction&&(window.activeMaster=!1,window.jqLink.func({customActiveMaster:[r,!1],customUserNonIdle:[r,!1]}))}function onPlayerError(t){console.log("error")}function onPlayerPercent(t){if(t.getPlayerState()===YT.PlayerState.PLAYING){var e=t.getVideoData(),a=e.title,r=e.video_id,o=t.getCurrentTime()<=window.customTimers[r].activeTimer?t.getCurrentTime():window.customTimers[r].activeTimer,i=t.getDuration()-o<=1.5?1:(Math.floor(o/t.getDuration()*10)/10).toFixed(2);parseFloat(i)>.9?i=.9:parseFloat(i)>.8?i=.8:parseFloat(i)>.7?i=.7:parseFloat(i)>.6?i=.6:parseFloat(i)>.5?i=.5:parseFloat(i)>.4?i=.4:parseFloat(i)>.3?i=.3:parseFloat(i)>.2?i=.2:parseFloat(i)>.1?i=.1:parseFloat(i)>0&&(i=0),i=parseFloat(i).toFixed(2),(!t.lastP||i>t.lastP)&&(t.lastP=i,0!=i&&(!1===ytDebug?dlPush("youtube","watch",r+" - "+a,100*i,!1,"beacon"):console.log("ASSISTIDO: "+100*i+"%  /  "+r+" - "+a))),1!=t.lastP&&setTimeout(onPlayerPercent,1e3,t)}}function ytExit(t){if(ytPlayers.length)if(void 0===t){for(var e=0;e<ytPlayers.length;e++)if(!0===ytPlayers[e].ready&&ytPlayers[e].getPlayerState()===YT.PlayerState.PLAYING){var a=(o=ytPlayers[e].getVideoData()).title,r=o.video_id;ytVideoTime=parseInt(ytPlayers[e].getCurrentTime()/ytPlayers[e].getDuration()*100),!1===ytDebug?dlPush("youtube","exit",r+" - "+a,ytVideoTime,!0,"beacon","fb"):console.log("SAIU: "+ytVideoTime+"%  /  "+r+" - "+a)}}else if(!0===ytPlayers[t].ready&&ytPlayers[t].getPlayerState()===YT.PlayerState.PLAYING){var o=ytPlayers[t].getVideoData(),a=o.title,r=o.video_id;ytVideoTime=parseInt(ytPlayers[t].getCurrentTime()/ytPlayers[t].getDuration()*100),!1===ytDebug?dlPush("youtube","exit",r+" - "+a,ytVideoTime,!0,"beacon","fb"):console.log("SAIU: "+ytVideoTime+"%  /  "+r+" - "+a)}}function ytPause(t){if(void 0===t)for(var e=0;e<ytPlayers.length;e++)!0===ytPlayers[e].ready&&ytPlayers[e].getPlayerState()===YT.PlayerState.PLAYING&&(ytPlayers[e].pauseVideo(),ytPlayers[e].autoStatChange=!0,ytPlayers[e].autoPaused=!0);else!0===ytPlayers[t].ready&&ytPlayers[t].getPlayerState()===YT.PlayerState.PLAYING&&(ytPlayers[t].pauseVideo(),ytPlayers[t].autoStatChange=!0,ytPlayers[t].autoPaused=!0)}function ytPlay(t){if(void 0===t)for(var e=0;e<ytPlayers.length;e++)!0===ytPlayers[e].ready&&ytPlayers[e].getPlayerState()===YT.PlayerState.PAUSED&&!0===ytPlayers[e].autoStatChange&&(ytPlayers[e].playVideo(),ytPlayers[e].autoPlayed=!0);else!0===ytPlayers[t].ready&&ytPlayers[t].getPlayerState()===YT.PlayerState.PAUSED&&(ytPlayers[t].playVideo(),ytPlayers[t].autoPlayed=!0)}function ytLoad(t,e,a,r,o){if(o=o||0,ytPlayers.length){var i=!0===e||"true"===e||1===e?"loadVideoById":"cueVideoById";if(void 0!==t){if("ready"!==ytPlayers[o].lastAction){var y=ytPlayers[o].getVideoData().video_id;ytExit(o),window.jqLink.func({unsetCustomTimer:[y]})}!0!==e&&"true"!==e&&1!==e||window.jqLink.func({customTimer:[t],customActiveMaster:[t,!0]}),ytPlayers[o][i]({videoId:t,startSeconds:parseInt(a),endSeconds:parseInt(r)}),!0!==e&&"true"!==e&&1!==e&&(ytPlayers[o].lastAction="ready")}}else ytVideos[o].setAttribute("data-ytId",t)}var ytVideos=document.querySelectorAll("[data-ytId]");if(ytVideos.length){var ytDebug=!0,ytPlayers=[],ytVideoTime,tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];firstScriptTag.parentNode.insertBefore(tag,firstScriptTag)}
//# sourceMappingURL=yt-tracking.min.js.map
